import{r as i,j as e,m as p,V as O,_ as P,$ as D,a0 as f,W as F,a1 as T,a2 as V}from"./chunk-K5sxpyAn.js";import{D as I}from"./chunk-Dyk2dB6c.js";import{S as z}from"./chunk-C8_VK1iL.js";import{O as A}from"./chunk-CXT2f-gH.js";import{e as E,f as l,g as n,B as L,t as d}from"./index-BMfWBLPx.js";import{S as U,a as B,b as $,c as W,d as o}from"./chunk-D5hk64dV.js";import"./chunk-DxddZhsK.js";const J=()=>{const g=E(),[c,m]=i.useState(null),[j,u]=i.useState(!1),[s,h]=i.useState("all"),y=i.useMemo(()=>s==="all"?l:l.filter(t=>t.status===s),[s]),w=(t,a="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:a}).format(t),N=t=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(t)),x=t=>{m(t.id),u(!0)},b=t=>{g(`/workflow?orderId=${t.id}`)},v=async t=>{if(t.paymentLink)try{await navigator.clipboard.writeText(t.paymentLink),d.success("Payment link copied to clipboard")}catch{d.error("Failed to copy payment link")}else d.error("No payment link available for this order")},k=t=>{if(t.blockchainTx){const a=`https://polygonscan.com/tx/${t.blockchainTx}`;window.open(a,"_blank","noopener,noreferrer")}else d.error("No blockchain transaction available for this order")},S=[{key:"id",header:"Order ID",width:"w-32",render:t=>e.jsx("code",{className:"text-sm font-mono bg-muted px-2 py-1 rounded",children:t})},{key:"buyerEmail",header:"Buyer Email",width:"w-48",render:t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white text-sm font-medium",children:t.charAt(0).toUpperCase()}),e.jsx("span",{className:"truncate",children:t})]})},{key:"model",header:"Model",width:"w-64",render:t=>e.jsx("div",{className:"max-w-xs",children:e.jsx("p",{className:"font-medium truncate",children:t})})},{key:"quantity",header:"Qty",width:"w-20",render:t=>e.jsx(L,{variant:"secondary",className:"font-mono",children:t})},{key:"totalAmount",header:"Amount",width:"w-32",render:(t,a)=>e.jsx("span",{className:"font-medium",children:t?w(t,a.currency):"N/A"})},{key:"status",header:"Status",width:"w-32",render:t=>e.jsx(z,{status:t,size:"sm"})},{key:"updatedAt",header:"Updated",width:"w-32",render:t=>e.jsx("span",{className:"text-sm text-muted-foreground",children:N(t)})},{key:"actions",header:"Actions",width:"w-48",sortable:!1,render:(t,a)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:r=>{r.stopPropagation(),x(a)},className:"h-8 w-8 p-0",title:"View Details",children:e.jsx(f,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:r=>{r.stopPropagation(),b(a)},className:"h-8 w-8 p-0",title:"View Workflow",children:e.jsx(F,{className:"h-4 w-4"})}),a.paymentLink&&e.jsx(n,{variant:"ghost",size:"sm",onClick:r=>{r.stopPropagation(),v(a)},className:"h-8 w-8 p-0",title:"Copy Payment Link",children:e.jsx(T,{className:"h-4 w-4"})}),a.blockchainTx&&e.jsx(n,{variant:"ghost",size:"sm",onClick:r=>{r.stopPropagation(),k(a)},className:"h-8 w-8 p-0",title:"View on Polygonscan",children:e.jsx(V,{className:"h-4 w-4"})})]})}],C=c?l.find(t=>t.id===c):void 0;return e.jsxs(p.div,{className:"p-6 space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:"Orders Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track and manage all supply chain orders"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(n,{variant:"outline",className:"gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Export"]}),e.jsxs(n,{className:"gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"New Order"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{label:"Total Orders",value:l.length,color:"from-blue-500/20 to-cyan-500/20"},{label:"Pending",value:l.filter(t=>t.status==="pending").length,color:"from-amber-500/20 to-orange-500/20"},{label:"Processing",value:l.filter(t=>t.status==="processing").length,color:"from-blue-500/20 to-indigo-500/20"},{label:"Completed",value:l.filter(t=>t.status==="completed").length,color:"from-emerald-500/20 to-green-500/20"}].map((t,a)=>e.jsxs(p.div,{className:`p-4 rounded-2xl border bg-gradient-to-br ${t.color} backdrop-blur-sm`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:a*.1},children:[e.jsx("div",{className:"text-2xl font-bold",children:t.value}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.label})]},t.label))}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Filters:"})]}),e.jsxs(U,{value:s,onValueChange:h,children:[e.jsx(B,{className:"w-48",children:e.jsx($,{placeholder:"Filter by status"})}),e.jsxs(W,{children:[e.jsx(o,{value:"all",children:"All Status"}),e.jsx(o,{value:"pending",children:"Pending"}),e.jsx(o,{value:"processing",children:"Processing"}),e.jsx(o,{value:"completed",children:"Completed"}),e.jsx(o,{value:"failed",children:"Failed"})]})]}),s!=="all"&&e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>h("all"),className:"text-muted-foreground hover:text-foreground",children:"Clear filters"})]}),e.jsx(I,{data:y,columns:S,searchable:!0,sortable:!0,pagination:!0,pageSize:10,onRowClick:x,emptyState:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-muted/20 rounded-full flex items-center justify-center mb-4",children:e.jsx(f,{className:"w-8 h-8 text-muted-foreground/50"})}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Orders Found"}),e.jsx("p",{className:"text-muted-foreground max-w-sm",children:s!=="all"?`No orders with status "${s}" found. Try adjusting your filters.`:"No orders have been created yet. Create your first order to get started."})]}),className:"shadow-xl"}),e.jsx(A,{orderId:c||"",open:j,onClose:()=>{u(!1),m(null)},order:C})]})};export{J as default};
